"use strict";function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var TR_8R=function(){var n="https://reqres.in/api";return new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"login",value:function(e,t){return fetch("".concat(n,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(function(e){return e.json()})}},{key:"getUsers",value:function(e){var t=0<arguments.length&&void 0!==e?e:1;return fetch("".concat(n,"/users?page=").concat(t)).then(function(e){return e.json()})}}]),e}())}(),_render=function(e,t){var n=e;return Object.keys(t).forEach(function(e){n=n.replaceAll("{{".concat(e,"}}"),t[e])}),n},LoginComponent=function(){function n(e,t){_classCallCheck(this,n),this._template=e,this._containerEl=t,this.onSuccess=function(){},this.render()}return _createClass(n,[{key:"onSubmit",value:function(){var t=this,e=this._containerEl.querySelector("#email_field").value,n=this._containerEl.querySelector("#password_field").value;TR_8R.login(e,n).then(function(e){t.onSuccess&&t.onSuccess(e.token),localStorage.setItem("token",e.token)})}},{key:"render",value:function(){var t=this;this._containerEl&&(this._containerEl.innerHTML=_render(this._template,{}),this._containerEl.addEventListener("click",function(e){e.target.classList.contains("buttonSend")&&t.onSubmit(e)}))}}]),n}(),mainContainerEl=document.getElementById("main");function onUserListLoad(){new UserListComponent(document.getElementById("user-list-template").innerText,document.getElementById("user-card-template").innerText,mainContainerEl)}function onLoginPageLoad(){new LoginComponent(document.getElementById("login-template").innerText,mainContainerEl).onSuccess=onUserListLoad}(localStorage.getItem("token")?onUserListLoad:onLoginPageLoad)();var UserListComponent=function(){function r(e,t,n){_classCallCheck(this,r),this._template=e,this._userCardTemplate=t,this._containerEl=n,this.list=[],this.onSuccess=function(){},this.loadUsersList()}return _createClass(r,[{key:"loadUsersList",value:function(e){var n=this,t=0<arguments.length&&void 0!==e?e:1;TR_8R.getUsers(t).then(function(e){var t=e.data;e.total_pages;n.list=t,n.render()})}},{key:"render",value:function(){var t=this;this._containerEl&&(this._containerEl.innerHTML=_render(this._template,{}),this._containerEl.querySelector("#user-list").innerHTML=this.list.map(function(e){return _objectSpread(_objectSpread({},e),{},{name:"".concat(e.first_name," ").concat(e.last_name)})}).map(function(e){return _render(t._userCardTemplate,e)}).join(""))}}]),r}();